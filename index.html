
<html>
<head>
  <meta charset="utf-8">
  <title>Daily Market Report - 2025-11-25</title>
  <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
  <style>
    body { font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif; margin: 1.5rem; }
    h1 { font-size: 1.6rem; }
    h2 { font-size: 1.3rem; margin-top: 1.5rem; }
    ul { line-height: 1.7; }
    .metric-link {
      cursor: pointer;
      text-decoration: underline;
      color: #007bff;
    }

    .score-section {
      margin-bottom: 1.5rem;
      padding: 1rem;
      border-radius: 0.75rem;
      border: 1px solid #e5e7eb;
      background: #f9fafb;
    }
    .score-title {
      font-size: 0.95rem;
      font-weight: 600;
      margin-bottom: 0.4rem;
    }
    .score-value {
      font-size: 1.2rem;
      font-weight: 700;
    }
    .score-sub {
      font-size: 0.8rem;
      color: #6b7280;
      margin-top: 0.2rem;
    }

    .pill {
      display: inline-flex;
      align-items: center;
      justify-content: center;
      padding: 0.1rem 0.45rem;
      border-radius: 999px;
      font-size: 0.75rem;
      font-weight: 600;
      border: 1px solid #d1d5db;
      background: #f3f4f6;
      color: #374151;
    }
    .pill-red {
      background: #fee2e2;
      color: #b91c1c;
      border-color: #fecaca;
    }
    .pill-yellow {
      background: #fef9c3;
      color: #92400e;
      border-color: #fef08a;
    }
    .pill-green {
      background: #dcfce7;
      color: #166534;
      border-color: #bbf7d0;
    }

    .breadth-panel {
      padding: 1rem;
      border-radius: 0.75rem;
      border: 1px solid #e5e7eb;
      background: #f9fafb;
      margin-bottom: 1.25rem;
    }
    .breadth-panel-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 0.5rem;
    }
    .breadth-title {
      font-size: 1rem;
      font-weight: 600;
    }
    .breadth-date {
      font-size: 0.8rem;
      color: #6b7280;
    }
    .breadth-cards {
      display: flex;
      flex-wrap: wrap;
      gap: 0.8rem;
      margin-top: 0.5rem;
    }
    .breadth-card {
      flex: 1 1 260px;
      border-radius: 0.75rem;
      border: 1px solid #e5e7eb;
      background: #ffffff;
      padding: 0.75rem 0.8rem;
      box-shadow: 0 2px 6px rgba(15,23,42,0.04);
    }
    .breadth-card-title {
      font-size: 0.9rem;
      font-weight: 600;
      margin-bottom: 0.3rem;
    }
    .breadth-card-sub {
      font-size: 0.75rem;
      color: #6b7280;
      margin-bottom: 0.5rem;
    }
    .breadth-headline {
      font-size: 0.8rem;
      color: #111827;
      margin-top: 0.45rem;
      margin-bottom: 0.4rem;
    }
    .breadth-link {
      font-size: 0.78rem;
      color: #4f46e5;
      text-decoration: none;
    }
    .breadth-link:hover {
      text-decoration: underline;
    }

    .breadth-lights-row {
      display: flex;
      align-items: center;
      gap: 0.5rem;
      flex-wrap: wrap;
    }

    .breadth-light {
      display: inline-flex;
      align-items: center;
      gap: 0.25rem;
      font-size: 0.78rem;
      padding: 0.15rem 0.45rem;
      border-radius: 9999px;
      border: 1px solid #e5e7eb;
      background: #f3f4f6;
    }

    .dot {
      display: inline-block;
      width: 0.5rem;
      height: 0.5rem;
      border-radius: 999px;
      background: #9ca3af;
    }
    .dot-GREEN { background: #22c55e; }
    .dot-YELLOW { background: #eab308; }
    .dot-RED { background: #ef4444; }

    .tech-summary {
      display: flex;
      flex-wrap: wrap;
      gap: 1rem;
      margin-top: 0.75rem;
    }
    .tech-card {
      flex: 1 1 260px;
      border-radius: 0.75rem;
      border: 1px solid #e5e7eb;
      background: #ffffff;
      padding: 0.75rem 0.8rem;
      box-shadow: 0 2px 6px rgba(15,23,42,0.05);
    }
    .tech-label {
      font-size: 0.8rem;
      color: #6b7280;
      margin-bottom: 0.3rem;
    }
    .tech-name {
      font-size: 0.9rem;
    }

    .tech-body {
      font-size: 0.78rem;
      color: #555;
      line-height: 1.4;
      margin-top: 0.25rem;
    }

    /* ===== QQQ 指标弹窗 ===== */
    #metric-modal {
      position: fixed;
      left: 5%;
      top: 5%;
      width: 90%;
      height: 80%;
      background: #ffffff;
      border: 1px solid #ccc;
      box-shadow: 0 0 10px rgba(0,0,0,0.3);
      display: none;
      padding: 10px;
      z-index: 9999;
    }
    #metric-modal-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 4px;
    }
    #metric-modal-title {
      font-size: 14px;
      font-weight: 600;
    }
    #metric-modal-close {
      cursor: pointer;
      font-size: 12px;
      color: #999;
    }
    #metric-chart {
      width: 100%;
      height: calc(100% - 24px);
    }

    /* 免责声明样式 */
    .disclaimer-block {
      margin-top: 1.8rem;
      padding: 0.9rem 1rem;
      border-radius: 0.75rem;
      border: 1px solid #e2e4f0;
      background: #f9fafb;
    }
    .disclaimer-title {
      font-size: 0.98rem;
      font-weight: 600;
      margin: 0 0 0.4rem 0;
    }
    .disclaimer-text {
      font-size: 22px;  /* 比页面正文明显大一号 */
      color: #4b5563;
      line-height: 1.7;
      margin: 0;
    }

    /* 顶部两块：Index Breadth + SPX 期权过滤器 并排 */
    .top-panels {
      display: flex;
      flex-wrap: wrap;
      gap: 1.5rem;
      margin-top: 1.5rem;
    }
    .top-panel {
      flex: 1;
      min-width: 260px;
    }

    /* 微信引流区域：左群二维码 / 中 LOGO / 右个人二维码 */
    .wechat-strip {
      margin: 2rem auto 1.8rem;
      padding: 1rem 1.5rem;
      max-width: 900px;
      border-radius: 16px;
      border: 1px solid #e5e5e5;
      background: #fafafa;
      display: flex;
      flex-wrap: wrap;
      gap: 1.2rem;
      align-items: center;
      justify-content: space-between;
    }
    .wechat-col {
      flex: 1;
      min-width: 180px;
      text-align: center;
      font-size: 0.85rem;
      color: #444;
    }
    .wechat-strip img {
      max-width: 100%;
      height: auto;
      border-radius: 12px;
      border: 1px solid #e5e5e5;
      background: #fff;
    }
    .wechat-logo {
      border-radius: 0;
      border: none;
      max-width: 420px;
      width: 100%;
    }
    .wechat-title {
      font-size: 0.9rem;
      font-weight: 600;
      margin-bottom: 0.4rem;
    }
    .wechat-center-text {
      font-size: 0.85rem;
      color: #555;
      margin-top: 0.5rem;
    }
    .wechat-note {
      font-size: 0.75rem;
      color: #777;
      margin: 0.4rem 0 0;
    }
    .wechat-id {
      font-family: Menlo, Monaco, Consolas, monospace;
      font-weight: 600;
      color: #111;
    }

    @media (max-width: 768px) {
      .top-panels {
        flex-direction: column;
      }
    }
  </style>
</head>
<body>
  
    <p>
    <a href="options_wall_v2_.html" target="_blank">Options Wall V2 面板</a>
    &nbsp;|&nbsp;
    <a href="technical_signals.html" target="_blank">技术信号面板</a>
    &nbsp;|&nbsp;
    <a href="options.html" target="_blank">指数期权总览</a>
  </p>

  <!-- ===== 顶部两大面板：Index Breadth + SPX 期权过滤器 ===== -->
  <div class="top-panels">

  
    <div class="top-panel">
    <h2>Index Breadth 概览</h2>
    <div class="breadth-panel">
      <div class="breadth-panel-header">
        <div class="breadth-title">宽度状态灯 & 每日点评</div>
        <div class="breadth-date">
          最近更新：2025-11-25
        </div>
      </div>

      <div class="breadth-cards">
        
          <div class="breadth-card">
            <div class="breadth-card-title">
              
            </div>
            <div class="breadth-card-sub">
              
            </div>

            <div class="breadth-lights-row">
              <div class="breadth-light">
                <span class="dot dot-yellow"></span>
                <span>20D</span>
                <span>64.5%</span>
              </div>
              <div class="breadth-light">
                <span class="dot dot-yellow"></span>
                <span>200D</span>
                <span>56.8%</span>
              </div>
              <div class="breadth-light">
                <span class="dot dot-red"></span>
                <span>高位</span>
                <span>24.7%</span>
              </div>
              <div class="breadth-light">
                <span class="dot dot-green"></span>
                <span>低位</span>
                <span>8.8%</span>
              </div>
            </div>

            
              <div class="breadth-headline">
                SP500 宽度整体偏多，短期和中长期结构都不弱，但仍存在一定分化。
              </div>
            

            <div style="margin-top:0.35rem;">
              
                <a href="breadth_overview.html" class="breadth-link" target="_blank">
                  查看宽度详情
                </a>
              
            </div>
          </div>
        
          <div class="breadth-card">
            <div class="breadth-card-title">
              
            </div>
            <div class="breadth-card-sub">
              
            </div>

            <div class="breadth-lights-row">
              <div class="breadth-light">
                <span class="dot dot-red"></span>
                <span>20D</span>
                <span>44.1%</span>
              </div>
              <div class="breadth-light">
                <span class="dot dot-yellow"></span>
                <span>200D</span>
                <span>52.0%</span>
              </div>
              <div class="breadth-light">
                <span class="dot dot-red"></span>
                <span>高位</span>
                <span>21.6%</span>
              </div>
              <div class="breadth-light">
                <span class="dot dot-yellow"></span>
                <span>低位</span>
                <span>17.6%</span>
              </div>
            </div>

            
              <div class="breadth-headline">
                NDX100 当前宽度信号大致中性，多空力量随节奏在不同区间之间切换。
              </div>
            

            <div style="margin-top:0.35rem;">
              
                <a href="breadth_overview.html" class="breadth-link" target="_blank">
                  查看宽度详情
                </a>
              
            </div>
          </div>
        
      </div>
    </div>
    </div>
  

  <div class="top-panel">
  <h2>SPX 期权过滤器</h2>
  <p>
    状态：
    
      <span class="pill">UNKNOWN</span>
    
  </p>
  <ul>
    <li>
      <span class="metric-link" data-symbol="SPX" data-metric="atm_iv">
        ATM IV: N/A
      </span>
      （iv z-score: 0.00）
    </li>
    <li>
      <span class="metric-link" data-symbol="SPX" data-metric="skew_down">
        下侧 skew: N/A
      </span>
    </li>
    <li>
      <span class="metric-link" data-symbol="SPX" data-metric="skew_up">
        上侧 skew: N/A
      </span>
    </li>
    <li>
      <span class="metric-link" data-symbol="SPX" data-metric="cpr">
        CPR (Call/Put Ratio): N/A
      </span>
    </li>
    <li>
      <span class="metric-link" data-symbol="SPX" data-metric="d_down_sigma">
        下方墙距离: N/A σ
      </span>
    </li>
    <li>
      <span class="metric-link" data-symbol="SPX" data-metric="d_up_sigma">
        上方墙距离: N/A σ
      </span>
    </li>
  </ul>
  </div>  <!-- end .top-panel (SPX 期权过滤器) -->
  </div>  <!-- end .top-panels -->

  <!-- 微信引流：左群二维码 / 中 LOGO / 右个人二维码 -->
  <div class="wechat-strip">
    <!-- 左：群二维码 -->
    <div class="wechat-col">
      <div class="wechat-title">社群二维码</div>
      <p class="wechat-note" style="font-size:0.8rem;">
        微信扫码进入「美股学习交流群」
      </p>
      <img src="group_qr.png" alt="微信群二维码">
      <p class="wechat-note">
        二维码通常 7 天内有效，如失效可添加右侧个人微信。
      </p>
    </div>

    <!-- 中：大 LOGO -->
    <div class="wechat-col" style="flex:2;">
      <img src="logo.png" alt="Moneys Working Logo" class="wechat-logo">
      <p class="wechat-center-text">
        美股大盘 &amp; 期权策略每日分享 · Moneys Working
      </p>
    </div>

    <!-- 右：个人微信二维码 + 微信号 -->
    <div class="wechat-col">
      <div class="wechat-title">个人微信 · 手动拉群</div>
      <img src="my_wechat_qr.png" alt="个人微信二维码">
      <p class="wechat-note">
        微信号：<span class="wechat-id">xuanyuanchongchu</span>
      </p>
      <p class="wechat-note">
        添加请备注「美股交流」，优先通过并拉你进群。
      </p>
    </div>
  </div>


  <div id="metric-modal">
    <div id="metric-modal-header">
      <div id="metric-modal-title"></div>
      <div id="metric-modal-close">[关闭]</div>
    </div>
    <div id="metric-chart"></div>
  </div>

  <!-- 全局免责声明 -->
  <div class="disclaimer-block">
    <div class="disclaimer-title">免责声明</div>
    <p class="disclaimer-text">
      本材料由个人研究工具自动生成，所载内容仅为对公开市场数据的客观整理与量化结果展示，
      不构成、亦不应被视为任何形式的证券或期货投资建议、买卖要约或投资承诺。本材料未考虑任何投资者的具体投资目标、
      财务状况及风险承受能力，相关观点和结论亦可能随市场环境变化而不再适用。期权及其他衍生品交易具有高度风险，
      可能导致远超初始投入的损失。请在独立判断的基础上自行作出投资决策，并在必要时咨询具备相应资质的专业机构；
      使用本材料进行的任何投资行为及其后果由投资者自行承担。
    </p>
  </div>

  <script>
    // 指标历史数据（从后端传入）
    const metricHistory = {};

    // 打开弹窗并画图
    function openMetricModal(symbol, metricKey) {
      const modal = document.getElementById('metric-modal');
      const modalTitle = document.getElementById('metric-modal-title');
      const chartDiv = document.getElementById('metric-chart');

      const history = metricHistory[symbol];
      if (!history) {
        modalTitle.textContent = symbol + ' - ' + metricKey + ' (无历史数据)';
        chartDiv.innerHTML = '<p>无历史数据</p>';
        modal.style.display = 'block';
        return;
      }

      const dates = history.dates || [];
      const values = history[metricKey] || [];

      const trace = {
        x: dates,
        y: values,
        mode: 'lines+markers',
        name: metricKey
      };

      const layout = {
        title: symbol + ' - ' + metricKey + ' 历史',
        xaxis: { title: 'Date' },
        yaxis: { title: metricKey }
      };

      Plotly.newPlot(chartDiv, [trace], layout);
      modalTitle.textContent = symbol + ' / ' + metricKey;
      modal.style.display = 'block';
    }

    function closeMetricModal() {
      const modal = document.getElementById('metric-modal');
      modal.style.display = 'none';
    }

    document.addEventListener('DOMContentLoaded', function() {
      // 点击指标链接时打开弹窗
      const links = document.querySelectorAll('.metric-link');
      links.forEach(function(link) {
        link.addEventListener('click', function() {
          const symbol = link.getAttribute('data-symbol') || 'SPX';
          const metricKey = link.getAttribute('data-metric');
          if (!metricKey) return;
          openMetricModal(symbol, metricKey);
        });
      });

      // 关闭弹窗
      const closeBtn = document.getElementById('metric-modal-close');
      closeBtn.addEventListener('click', closeMetricModal);

      // 点击弹窗外区域关闭（可按需保留）
      window.addEventListener('click', function(e) {
        const modal = document.getElementById('metric-modal');
        if (e.target === modal) {
          closeMetricModal();
        }
      });
    });
  </script>
</body>
</html>